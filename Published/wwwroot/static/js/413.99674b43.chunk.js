"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[413],{6713:function(e,n,r){var t=r(74165),a=r(15861),s=r(6924),i=r(81420),u=(0,s.Ue)({baseURL:i.Z.apiUrl});u.addAsyncRequestTransform(function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.headers.Authorization="bearer ".concat(r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.Z=u},7435:function(e,n,r){var t=r(6713),a="/buildings";n.Z={add:function(e){return t.Z.post(a,e)},update:function(e,n){return t.Z.put(a+"/"+e,n)},getAll:function(){return t.Z.get(a)}}},5504:function(e,n,r){var t=r(1251),a=r(80184);n.Z=function(e){var n=e.children,r=e.isLoading;return(0,a.jsx)(a.Fragment,{children:r?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(t.JL,{color:"primary",size:"lg"})}):n})}},50413:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(1413),a=r(74165),s=r(42982),i=r(15861),u=r(70885),c=r(72791),l=r(64074),d=r(43360),o=r(79745),f=r.n(o),m=r(67352),h=r(39918),x=r(77942),Z=r(30456),p=r(5504),b=r(92506),g=r(97425),j=r(61229),k=r(80184),v=function(e){var n=e.show,r=e.setShow,t=e.building,a=e.schema,s=e.handleSubmit;return(0,k.jsx)(b.J9,{enableReinitialize:!0,initialValues:t,validationSchema:a,onSubmit:s,children:function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(g.Z,{show:n,children:[(0,k.jsxs)(g.Z.Header,{children:[(0,k.jsx)(g.Z.Title,{children:0===t.id?"New Building":"Update Building"}),(0,k.jsx)(d.Z,{size:"sm",variant:"light",className:"float-right",onClick:function(){return r(!1)},children:(0,k.jsx)(f(),{style:{fontSize:15},name:"fas fa-close"})})]}),(0,k.jsxs)(g.Z.Body,{children:[(0,k.jsx)(j.nv,{name:"name",label:"Name",required:!0}),(0,k.jsx)(j.N7,{name:"address",label:"Address",required:!0})]}),(0,k.jsxs)(g.Z.Footer,{children:[(0,k.jsx)(d.Z,{onClick:function(){return r(!1)},className:"btn-secondary",children:"Close"}),(0,k.jsx)(j.c1,{title:0===t.id?"Create":"Update"})]})]})})}})},w=r(7435),S=x.Ry({id:x.Rx(),name:x.Z_().required().label("Building Name"),address:x.Z_().required().label("Address")}),A=function(){var e=(0,c.useState)(!1),n=(0,u.Z)(e,2),r=n[0],o=n[1],x=(0,c.useState)([]),b=(0,u.Z)(x,2),g=b[0],j=b[1],A=(0,c.useState)({id:0,name:"",address:""}),y=(0,u.Z)(A,2),N=y[0],B=y[1],C=(0,c.useState)([{label:"Name",field:"name"},{label:"Address",field:"address"},{label:"",field:"edit"}]),z=(0,u.Z)(C,1)[0],F=(0,c.useState)(!1),R=(0,u.Z)(F,2),T=R[0],U=R[1],q=(0,Z.Z)(localStorage.token),L=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,w.Z.getAll();case 3:if(n=e.sent,r=n.status,t=n.data,U(!1),200===r){e.next=9;break}return e.abrupt("return",m.Am.error("Network Error"));case 9:j((0,s.Z)(t));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,r){var i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,r.resetForm)(),o(!1),U(!0),0!==n.id){e.next=18;break}return e.next=7,w.Z.add((0,t.Z)({},n));case 7:if(i=e.sent,U(!1),!i.ok){e.next=13;break}return m.Am.info("Successful Registered."),o(!1),e.abrupt("return",j([i.data].concat((0,s.Z)(g))));case 13:if(400!==i.status){e.next=15;break}return e.abrupt("return",m.Am.error("This building is already exist!"));case 15:m.Am.error("Something went wrong"),e.next=27;break;case 18:return e.next=20,w.Z.update(n.id,n);case 20:if(u=e.sent,U(!1),!u.ok){e.next=26;break}return m.Am.info("Successful Updates."),o(!1),e.abrupt("return",j([u.data].concat((0,s.Z)(g.filter((function(e){return e.id!==n.id}))))));case 26:m.Am.error("Something went wrong");case 27:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){L()}),[N]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v,{show:r,setShow:o,building:N,schema:S,handleSubmit:E}),(0,k.jsxs)(l.Z,{children:[(0,k.jsxs)(l.Z.Header,{children:["admin"===q.role?(0,k.jsxs)(d.Z,{className:"float-right",onClick:function(){o(!0),B({id:0,name:"",address:""})},disabled:T,children:[(0,k.jsx)(f(),{name:"fas fa-plus-circle"})," New Building"]}):null,(0,k.jsx)(l.Z.Title,{children:"Buildings"})]}),(0,k.jsx)(l.Z.Body,{children:(0,k.jsx)(p.Z,{isLoading:T,children:(0,k.jsx)(h.Vm4,{hover:!0,entriesOptions:[10,25,50,100,250,500,1e3],entries:10,pagesAmount:10,data:{columns:z,rows:g.map((function(e){return e.edit=(0,k.jsx)(k.Fragment,{children:"admin"===q.role?(0,k.jsx)(d.Z,{onClick:function(){return function(e){var n=(0,t.Z)({},e);delete n.edit,B(n),o(!0)}(e)},className:"btn-light btn-sm",children:(0,k.jsx)(f(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})}):null}),e}))},pagingTop:!0,searchTop:!0,searchBottom:!1,fullPagination:!0})})})]})]})}}}]);
//# sourceMappingURL=413.99674b43.chunk.js.map