"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[1],{6713:function(e,r,n){var t=n(74165),i=n(15861),o=n(6924),a=n(81420),s=(0,o.Ue)({baseURL:a.Z.apiUrl});s.addAsyncRequestTransform(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:r.headers.Authorization="bearer ".concat(n);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.Z=s},7435:function(e,r,n){var t=n(6713),i="/buildings";r.Z={add:function(e){return t.Z.post(i,e)},update:function(e,r){return t.Z.put(i+"/"+e,r)},getAll:function(){return t.Z.get(i)}}},63364:function(e,r,n){var t=n(6713),i="/rooms";r.Z={add:function(e){return t.Z.post(i,e)},update:function(e,r){return t.Z.put(i+"/"+e,r)},getAll:function(){return t.Z.get(i)},getById:function(e){return t.Z.get(i+"/"+e)}}},5504:function(e,r,n){var t=n(1251),i=n(80184);r.Z=function(e){var r=e.children,n=e.isLoading;return(0,i.jsx)(i.Fragment,{children:n?(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(t.JL,{color:"primary",size:"lg"})}):r})}},58001:function(e,r,n){n.r(r),n.d(r,{default:function(){return R}});var t=n(1413),i=n(74165),o=n(42982),a=n(15861),s=n(70885),u=n(72791),l=n(64074),c=n(43360),d=n(79745),m=n.n(d),f=n(67352),Z=n(39918),b=n(77942),h=n(30456),p=n(5504),x=n(92506),g=n(97425),S=n(61229),j=n(80184),v=function(e){var r=e.isLoading,n=e.show,t=e.setShow,i=e.room,o=e.buildings,a=e.schema,s=e.handleSubmit;return(0,j.jsx)(x.J9,{enableReinitialize:!0,initialValues:i,validationSchema:a,onSubmit:s,children:function(){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(g.Z,{show:n,children:[(0,j.jsxs)(g.Z.Header,{children:[(0,j.jsx)(g.Z.Title,{children:0===i.id?"New Room":"Update Room"}),(0,j.jsx)(c.Z,{size:"sm",variant:"light",className:"float-right",onClick:function(){return t(!1)},children:(0,j.jsx)(m(),{style:{fontSize:15},name:"fas fa-close"})})]}),(0,j.jsxs)(g.Z.Body,{children:[(0,j.jsx)(S.nv,{name:"roomNumber",label:"Room No",required:!0}),(0,j.jsx)(S.nv,{name:"roomSizeInSq",label:"Room Size(Karre)",type:"number",required:!0}),(0,j.jsx)(S.nv,{name:"floorNo",label:"Floor No",required:!0}),(0,j.jsx)(S.mg,{name:"buildingId",label:"Building",options:o.map((function(e){return{label:e.name,value:e.id}})),required:!0,isLoading:r}),(0,j.jsx)(S.N7,{name:"description",label:"Description"})]}),(0,j.jsxs)(g.Z.Footer,{children:[(0,j.jsx)(c.Z,{onClick:function(){return t(!1)},className:"btn-secondary",children:"Close"}),(0,j.jsx)(S.c1,{title:0===i.id?"Create":"Update"})]})]})})}})},N=n(63364),k=n(7435),w=b.Ry({id:b.Rx(),roomNumber:b.Z_().required().label("Room No"),roomSizeInSq:b.Z_().required().label("Room Size"),floorNo:b.Z_().required().label("floorNo"),buildingId:b.Z_().required().label("Building"),description:b.Z_().label("Description")}),R=function(){var e=(0,u.useState)(!1),r=(0,s.Z)(e,2),n=r[0],d=r[1],b=(0,u.useState)([]),x=(0,s.Z)(b,2),g=x[0],S=x[1],R=(0,u.useState)({id:0,roomNumber:"",roomSizeInSq:"",floorNo:"",buildingId:"",description:""}),y=(0,s.Z)(R,2),q=y[0],z=y[1],A=(0,u.useState)([]),I=(0,s.Z)(A,2),C=I[0],F=I[1],B=(0,u.useState)([{label:"Room No",field:"roomNumber"},{label:"Room Size (Karre)",field:"roomSizeInSq"},{label:"Building",field:"buildingName"},{label:"Floor No",field:"floorNo"},{label:"",field:"edit"}]),L=(0,s.Z)(B,1)[0],T=(0,u.useState)(!0),U=(0,s.Z)(T,2),_=U[0],D=U[1],E=(0,h.Z)(localStorage.token),H=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r,n,t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,N.Z.getAll();case 3:return r=e.sent,n=r.status,t=r.data,e.next=8,k.Z.getAll();case 8:if(a=e.sent,D(!1),200===n){e.next=12;break}return e.abrupt("return",f.Am.error("Network Error"));case 12:S((0,o.Z)(t)),F((0,o.Z)(a.data));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r,n){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,n.resetForm)(),d(!1),D(!0),0!==r.id){e.next=18;break}return e.next=7,N.Z.add((0,t.Z)({},r));case 7:if(a=e.sent,D(!1),!a.ok){e.next=13;break}return f.Am.info("Successful Registered."),d(!1),e.abrupt("return",S([a.data].concat((0,o.Z)(g))));case 13:if(400!==a.status){e.next=15;break}return e.abrupt("return",f.Am.error("This room already exist!"));case 15:f.Am.error("Something went wrong"),e.next=27;break;case 18:return e.next=20,N.Z.update(r.id,r);case 20:if(s=e.sent,D(!1),!s.ok){e.next=26;break}return f.Am.info("Successful Updates."),d(!1),e.abrupt("return",S([s.data].concat((0,o.Z)(g.filter((function(e){return e.id!==r.id}))))));case 26:f.Am.error("Something went wrong");case 27:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){H()}),[q]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v,{isLoading:_,show:n,setShow:d,room:q,buildings:C,schema:w,handleSubmit:J}),(0,j.jsxs)(l.Z,{children:[(0,j.jsxs)(l.Z.Header,{children:["admin"===E.role?(0,j.jsxs)(c.Z,{className:"float-right",onClick:function(){d(!0),z({id:0,roomNumber:"",roomSizeInSq:"",floorNo:"",buildingId:"",description:""})},disabled:_,children:[(0,j.jsx)(m(),{name:"fas fa-plus-circle"})," New Room"]}):null,(0,j.jsx)(l.Z.Title,{children:"Rooms"})]}),(0,j.jsx)(l.Z.Body,{children:(0,j.jsx)(p.Z,{isLoading:_,children:(0,j.jsx)(Z.Vm4,{hover:!0,entriesOptions:[10,25,50,100,250,500,1e3],entries:10,pagesAmount:10,data:{columns:L,rows:g.map((function(e){var r;return e.edit=(0,j.jsx)(j.Fragment,{children:"admin"===E.role?(0,j.jsx)(c.Z,{onClick:function(){return function(e){var r=(0,t.Z)({},e);delete r.edit,z(r),d(!0)}(e)},className:"btn-light btn-sm",children:(0,j.jsx)(m(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})}):null}),e.buildingName=null===(r=e.building)||void 0===r?void 0:r.name,e}))},pagingTop:!0,searchTop:!0,searchBottom:!1,fullPagination:!0})})})]})]})}}}]);
//# sourceMappingURL=1.6c31b248.chunk.js.map