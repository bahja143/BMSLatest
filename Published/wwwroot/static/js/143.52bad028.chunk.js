"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[143],{81420:function(e,a){var t={dev:{apiUrl:"https://localhost:7146/api"},pro:{apiUrl:"http://".concat(window.location.host,"/api")}};a.Z=t.pro},11599:function(e,a,t){var r=t(74569),s=t.n(r),n=t(67352);s().interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log(e),n.Am.error("Unexpected error occur")),Promise.reject(e)}));var l={post:s().post,put:s().put,get:s().get};a.Z=l},12143:function(e,a,t){t.r(a),t.d(a,{default:function(){return ge}});var r=t(37762),s=t(4942),n=t(42982),l=t(1413),i=t(15671),o=t(43144),d=t(60136),c=t(27277),u=t(72791),m=t(64074),f=t(89743),v=t(43360),h=t(39918),p=t(79745),b=t.n(p),x=t(52343),Z=t.n(x),g=t(67352),N=t(11599),y=t(81420),w=t(97425),j=t(87462),P=t(63366),S=t(60654),C=t.n(S),E=(t(33573),t(52007)),k=t.n(E),F=["as","className","type","tooltip"],I={type:k().string,tooltip:k().bool,as:k().elementType},R=u.forwardRef((function(e,a){var t=e.as,r=void 0===t?"div":t,s=e.className,n=e.type,l=void 0===n?"valid":n,i=e.tooltip,o=void 0!==i&&i,d=(0,P.Z)(e,F);return u.createElement(r,(0,j.Z)({},d,{ref:a,className:C()(s,l+"-"+(o?"tooltip":"feedback"))}))}));R.displayName="Feedback",R.propTypes=I;var A=R,U=t(84934),T=t(10162),V=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],z=u.forwardRef((function(e,a){var t=e.id,r=e.bsPrefix,s=e.bsCustomPrefix,n=e.className,l=e.type,i=void 0===l?"checkbox":l,o=e.isValid,d=void 0!==o&&o,c=e.isInvalid,m=void 0!==c&&c,f=e.isStatic,v=e.as,h=void 0===v?"input":v,p=(0,P.Z)(e,V),b=(0,u.useContext)(U.Z),x=b.controlId,Z=b.custom?[s,"custom-control-input"]:[r,"form-check-input"],g=Z[0],N=Z[1];return r=(0,T.vE)(g,N),u.createElement(h,(0,j.Z)({},p,{ref:a,type:i,id:t||x,className:C()(n,r,d&&"is-valid",m&&"is-invalid",f&&"position-static")}))}));z.displayName="FormCheckInput";var O=z,L=["bsPrefix","bsCustomPrefix","className","htmlFor"],M=u.forwardRef((function(e,a){var t=e.bsPrefix,r=e.bsCustomPrefix,s=e.className,n=e.htmlFor,l=(0,P.Z)(e,L),i=(0,u.useContext)(U.Z),o=i.controlId,d=i.custom?[r,"custom-control-label"]:[t,"form-check-label"],c=d[0],m=d[1];return t=(0,T.vE)(c,m),u.createElement("label",(0,j.Z)({},l,{ref:a,htmlFor:n||o,className:C()(s,t)}))}));M.displayName="FormCheckLabel";var q=M,_=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],G=u.forwardRef((function(e,a){var t=e.id,r=e.bsPrefix,s=e.bsCustomPrefix,n=e.inline,l=void 0!==n&&n,i=e.disabled,o=void 0!==i&&i,d=e.isValid,c=void 0!==d&&d,m=e.isInvalid,f=void 0!==m&&m,v=e.feedbackTooltip,h=void 0!==v&&v,p=e.feedback,b=e.className,x=e.style,Z=e.title,g=void 0===Z?"":Z,N=e.type,y=void 0===N?"checkbox":N,w=e.label,S=e.children,E=e.custom,k=e.as,F=void 0===k?"input":k,I=(0,P.Z)(e,_),R="switch"===y||E,V=R?[s,"custom-control"]:[r,"form-check"],z=V[0],L=V[1];r=(0,T.vE)(z,L);var M=(0,u.useContext)(U.Z).controlId,G=(0,u.useMemo)((function(){return{controlId:t||M,custom:R}}),[M,R,t]),H=R||null!=w&&!1!==w&&!S,B=u.createElement(O,(0,j.Z)({},I,{type:"switch"===y?"checkbox":y,ref:a,isValid:c,isInvalid:f,isStatic:!H,disabled:o,as:F}));return u.createElement(U.Z.Provider,{value:G},u.createElement("div",{style:x,className:C()(b,r,R&&"custom-"+y,l&&r+"-inline")},S||u.createElement(u.Fragment,null,B,H&&u.createElement(q,{title:g},w),(c||f)&&u.createElement(A,{type:c?"valid":"invalid",tooltip:h},p))))}));G.displayName="FormCheck",G.Input=O,G.Label=q;var H=G,B=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],D=u.forwardRef((function(e,a){var t=e.id,r=e.bsPrefix,s=e.bsCustomPrefix,n=e.className,l=e.isValid,i=e.isInvalid,o=e.lang,d=e.as,c=void 0===d?"input":d,m=(0,P.Z)(e,B),f=(0,u.useContext)(U.Z),v=f.controlId,h=f.custom?[s,"custom-file-input"]:[r,"form-control-file"],p=h[0],b=h[1];return r=(0,T.vE)(p,b),u.createElement(c,(0,j.Z)({},m,{ref:a,id:t||v,type:"file",lang:o,className:C()(n,r,l&&"is-valid",i&&"is-invalid")}))}));D.displayName="FormFileInput";var J=D,K=["bsPrefix","bsCustomPrefix","className","htmlFor"],Q=u.forwardRef((function(e,a){var t=e.bsPrefix,r=e.bsCustomPrefix,s=e.className,n=e.htmlFor,l=(0,P.Z)(e,K),i=(0,u.useContext)(U.Z),o=i.controlId,d=i.custom?[r,"custom-file-label"]:[t,"form-file-label"],c=d[0],m=d[1];return t=(0,T.vE)(c,m),u.createElement("label",(0,j.Z)({},l,{ref:a,htmlFor:n||o,className:C()(s,t),"data-browse":l["data-browse"]}))}));Q.displayName="FormFileLabel";var W=Q,X=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],Y=u.forwardRef((function(e,a){var t=e.id,r=e.bsPrefix,s=e.bsCustomPrefix,n=e.disabled,l=void 0!==n&&n,i=e.isValid,o=void 0!==i&&i,d=e.isInvalid,c=void 0!==d&&d,m=e.feedbackTooltip,f=void 0!==m&&m,v=e.feedback,h=e.className,p=e.style,b=e.label,x=e.children,Z=e.custom,g=e.lang,N=e["data-browse"],y=e.as,w=void 0===y?"div":y,S=e.inputAs,E=void 0===S?"input":S,k=(0,P.Z)(e,X),F=Z?[s,"custom"]:[r,"form-file"],I=F[0],R=F[1];r=(0,T.vE)(I,R);var V=(0,u.useContext)(U.Z).controlId,z=(0,u.useMemo)((function(){return{controlId:t||V,custom:Z}}),[V,Z,t]),O=null!=b&&!1!==b&&!x,L=u.createElement(J,(0,j.Z)({},k,{ref:a,isValid:o,isInvalid:c,disabled:l,as:E,lang:g}));return u.createElement(U.Z.Provider,{value:z},u.createElement(w,{style:p,className:C()(h,r,Z&&"custom-file")},x||u.createElement(u.Fragment,null,Z?u.createElement(u.Fragment,null,L,O&&u.createElement(W,{"data-browse":N},b)):u.createElement(u.Fragment,null,O&&u.createElement(W,null,b),L),(o||c)&&u.createElement(A,{type:o?"valid":"invalid",tooltip:f},v))))}));Y.displayName="FormFile",Y.Input=J,Y.Label=W;var $=Y,ee=(t(42391),["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"]),ae=u.forwardRef((function(e,a){var t,r,s=e.bsPrefix,n=e.bsCustomPrefix,l=e.type,i=e.size,o=e.htmlSize,d=e.id,c=e.className,m=e.isValid,f=void 0!==m&&m,v=e.isInvalid,h=void 0!==v&&v,p=e.plaintext,b=e.readOnly,x=e.custom,Z=e.as,g=void 0===Z?"input":Z,N=(0,P.Z)(e,ee),y=(0,u.useContext)(U.Z).controlId,w=x?[n,"custom"]:[s,"form-control"],S=w[0],E=w[1];if(s=(0,T.vE)(S,E),p)(r={})[s+"-plaintext"]=!0,t=r;else if("file"===l){var k;(k={})[s+"-file"]=!0,t=k}else if("range"===l){var F;(F={})[s+"-range"]=!0,t=F}else if("select"===g&&x){var I;(I={})[s+"-select"]=!0,I[s+"-select-"+i]=i,t=I}else{var R;(R={})[s]=!0,R[s+"-"+i]=i,t=R}return u.createElement(g,(0,j.Z)({},N,{type:l,size:o,ref:a,readOnly:b,id:d||y,className:C()(c,t,f&&"is-valid",h&&"is-invalid")}))}));ae.displayName="FormControl";var te=Object.assign(ae,{Feedback:A}),re=t(323),se=t(53392),ne=["bsPrefix","className","as","muted"],le=u.forwardRef((function(e,a){var t=e.bsPrefix,r=e.className,s=e.as,n=void 0===s?"small":s,l=e.muted,i=(0,P.Z)(e,ne);return t=(0,T.vE)(t,"form-text"),u.createElement(n,(0,j.Z)({},i,{ref:a,className:C()(r,t,l&&"text-muted")}))}));le.displayName="FormText";var ie=le,oe=u.forwardRef((function(e,a){return u.createElement(H,(0,j.Z)({},e,{ref:a,type:"switch"}))}));oe.displayName="Switch",oe.Input=H.Input,oe.Label=H.Label;var de=oe,ce=t(66543),ue=["bsPrefix","inline","className","validated","as"],me=(0,ce.Z)("form-row"),fe=u.forwardRef((function(e,a){var t=e.bsPrefix,r=e.inline,s=e.className,n=e.validated,l=e.as,i=void 0===l?"form":l,o=(0,P.Z)(e,ue);return t=(0,T.vE)(t,"form"),u.createElement(i,(0,j.Z)({},o,{ref:a,className:C()(s,n&&"was-validated",r&&t+"-inline")}))}));fe.displayName="Form",fe.defaultProps={inline:!1},fe.Row=me,fe.Group=re.Z,fe.Control=te,fe.Check=H,fe.File=$,fe.Switch=de,fe.Label=se.Z,fe.Text=ie;var ve=fe,he=t(65666),pe=t(80184),be=function(e){var a=e.show,t=e.onClose,r=e.onChange,s=e.user,n=e.onSubmit,l=e.errors,i=e.validate,o=[{label:"Admin",value:"admin"},{label:"User",value:"user"}];return(0,pe.jsxs)(w.Z,{show:a,children:[(0,pe.jsxs)(w.Z.Header,{children:[(0,pe.jsx)(w.Z.Title,{children:0===s.id?"New User":"Update User"}),(0,pe.jsx)(v.Z,{size:"sm",variant:"light",className:"float-right",onClick:t,children:(0,pe.jsx)(b(),{style:{fontSize:15},name:"fas fa-close"})})]}),(0,pe.jsxs)(ve,{onSubmit:n,children:[(0,pe.jsxs)(w.Z.Body,{children:[(0,pe.jsxs)(re.Z,{children:[(0,pe.jsxs)(se.Z,{children:["Name ",(0,pe.jsx)("span",{className:"text-danger",children:"*"})]}),(0,pe.jsx)("input",{name:"name",value:s.name,onChange:r,className:"form-control"}),l.name&&(0,pe.jsx)("div",{className:"text-danger",children:l.name})]}),(0,pe.jsxs)(re.Z,{children:[(0,pe.jsxs)(se.Z,{children:["Role ",(0,pe.jsx)("span",{className:"text-danger",children:"*"})]}),(0,pe.jsx)(he.ZP,{options:o,value:o.filter((function(e){return e.value===s.role})),onChange:function(e){return r({currentTarget:{name:"role",value:e.value}})}}),l.role&&(0,pe.jsx)("div",{className:"text-danger",children:l.role})]}),(0,pe.jsxs)(re.Z,{children:[(0,pe.jsxs)(se.Z,{children:["Username ",(0,pe.jsx)("span",{className:"text-danger",children:"*"})]}),(0,pe.jsx)("input",{name:"username",value:s.username,onChange:r,className:"form-control"}),l.username&&(0,pe.jsx)("div",{className:"text-danger",children:l.username})]}),(0,pe.jsxs)(re.Z,{children:[(0,pe.jsxs)(se.Z,{children:["Password ",(0,pe.jsx)("span",{className:"text-danger",children:"*"})]}),(0,pe.jsx)("input",{name:"password",value:s.password,onChange:r,className:"form-control"}),l.password&&(0,pe.jsx)("div",{className:"text-danger",children:l.password})]})]}),(0,pe.jsxs)(w.Z.Footer,{children:[(0,pe.jsx)(v.Z,{onClick:t,variant:"secondary",children:"Close"}),(0,pe.jsx)(v.Z,{disabled:i(),type:"submit",children:"Submit"})]})]})]})},xe=t(30456),Ze=function(e){(0,d.Z)(t,e);var a=(0,c.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var o=arguments.length,d=new Array(o),c=0;c<o;c++)d[c]=arguments[c];return(e=a.call.apply(a,[this].concat(d))).state={user:{id:0,name:"",username:"",role:"",password:"",status:!0},users:[],errors:{},show:!1,tableHeaders:[{label:"Name",field:"name"},{label:"Username",field:"username"},{label:"Role",field:"role"},{label:"",field:"edit"}]},e.schema={id:Z().any(),name:Z().string().required().label("Name"),username:Z().string().required().label("Username"),role:Z().string().required().label("Role"),status:Z().any(),password:Z().string().required().label("Password")},e.handleStatus=function(a){var t=e.state.users;e.setState({loader:!0});var r=localStorage.token,s={Authorization:"bearer ".concat(r)};N.Z.get(y.Z.apiUrl+"/userStatus/"+a,{headers:s}).then((function(r){var s=r.data;e.setState({users:t.map((function(e){return e.id===a&&(e.status=s.status),e})),loader:!1})})).catch((function(a){console.log(a),e.setState({loader:!1}),g.Am.error("Something went wrong")}))},e.handleUpdate=function(a){var t=(0,l.Z)({},a);delete t.edit,e.setState({user:t,show:!0})},e.handlePapulate=function(a){var t=e.state.users;e.setState({users:[a].concat((0,n.Z)(t.filter((function(e){return e.id!==a.id}))))})},e.validateOnProperty=function(a){var t=(0,s.Z)({},a.name,a.value),r=(0,s.Z)({},a.name,e.schema[a.name]),n=Z().validate(t,r).error;return n?n.details[0].message:null},e.validate=function(){var a=e.state.user,t={},s=Z().validate(a,e.schema,{abortEarly:!1}).error;if(!s)return null;var n,l=(0,r.Z)(s.details);try{for(l.s();!(n=l.n()).done;){var i=n.value;t[i.path[0]]=i.message}}catch(o){l.e(o)}finally{l.f()}return t},e.handleSubmit=function(a){a.preventDefault();var t=e.state.user,r=e.validate(),s=localStorage.token,n={Authorization:"bearer ".concat(s)};e.setState({errors:r||{}}),r||(e.handleClose(),e.setState({loader:!0}),0===t.id?N.Z.post(y.Z.apiUrl+"/users",t,{headers:n}).then((function(a){var t=a.data;e.setState({loader:!1}),g.Am.info("Successfull Registred"),e.handlePapulate(t),e.setState({user:{id:0,name:"",username:"",role:"",password:"",status:!0}})})).catch((function(a){e.setState({loader:!1}),console.log(a),e.handleShow(),a.response&&a.response.data?g.Am.error(a.response.data):g.Am.error("Something went wrong")})):N.Z.put(y.Z.apiUrl+"/users/"+t.id,t,{headers:n}).then((function(a){var t=a.data;e.setState({loader:!1}),g.Am.info("Successfull Update"),e.handlePapulate(t),e.setState({user:{id:0,name:"",username:"",role:"",password:"",status:!0}})})).catch((function(a){e.setState({loader:!1}),console.log(a),e.handleShow(),g.Am.error("Something went wrong")})))},e.handleOnChange=function(a){var t=a.currentTarget,r=e.state,s=r.user,n=r.errors;s[t.name]=t.value;var l=e.validateOnProperty(t);l?n[t.name]=l:delete n[t.name],e.setState({user:s})},e.handleClose=function(){e.setState({show:!1})},e.handleShow=function(){e.setState({show:!0})},e}return(0,o.Z)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.users,r=a.tableHeaders,s=a.show,n=a.user,l=a.errors;return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(be,{show:s,onClose:this.handleClose,onChange:this.handleOnChange,user:n,onSubmit:this.handleSubmit,errors:l,validate:this.validate}),(0,pe.jsxs)(m.Z,{children:[(0,pe.jsxs)(m.Z.Header,{children:[(0,pe.jsx)(f.Z,{className:"float-right",children:(0,pe.jsxs)(v.Z,{onClick:this.handleShow,children:[(0,pe.jsx)(b(),{name:"plus-circle",className:"fas fa-plus-circle"})," ","New User"]})}),(0,pe.jsx)(m.Z.Title,{children:"Users"})]}),(0,pe.jsx)(m.Z.Body,{children:(0,pe.jsx)(h.Vm4,{hover:!0,entriesOptions:[10,25,50,100],entries:10,pagesAmount:10,data:{columns:r,rows:t.map((function(a){return a.edit=a.status?(0,pe.jsxs)(u.Fragment,{children:[(0,pe.jsx)("button",{onClick:function(){return e.handleStatus(a.id)},className:"btn btn-link",children:"Active"}),(0,pe.jsx)("button",{className:"btn btn-link",onClick:function(){return e.handleUpdate(a)},children:(0,pe.jsx)(b(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})})]}):(0,pe.jsxs)(u.Fragment,{children:[(0,pe.jsx)("button",{onClick:function(){return e.handleStatus(a.id)},className:"btn btn-link",children:"Not active"}),(0,pe.jsx)("button",{className:"btn btn-link",onClick:function(){return e.handleUpdate(a)},children:(0,pe.jsx)(b(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})})]}),a}))},pagingTop:!0,searchTop:!0,searchBottom:!1})})]})]})}},{key:"componentDidMount",value:function(){var e=this;this.setState({loader:!0});var a=localStorage.token,t=a?(0,xe.Z)(a):"",r={Authorization:"bearer ".concat(a)};N.Z.get(y.Z.apiUrl+"/users",{headers:r}).then((function(a){var r=a.data;e.setState({users:r.filter((function(e){return e.id!=t.id})),loader:!1})})).catch((function(a){console.log(a),e.setState({loader:!1}),g.Am.error("Something went wrong")}))}}]),t}(u.Component),ge=Ze},33573:function(e,a,t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.default)((function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=null;return a.forEach((function(e){if(null==s){var a=e.apply(void 0,t);null!=a&&(s=a)}})),s}))};var r,s=t(46054),n=(r=s)&&r.__esModule?r:{default:r};e.exports=a.default},46054:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){function a(a,t,r,s,n,l){var i=s||"<<anonymous>>",o=l||r;if(null==t[r])return a?new Error("Required "+n+" `"+o+"` was not specified in `"+i+"`."):null;for(var d=arguments.length,c=Array(d>6?d-6:0),u=6;u<d;u++)c[u-6]=arguments[u];return e.apply(void 0,[t,r,i,n,o].concat(c))}var t=a.bind(null,!1);return t.isRequired=a.bind(null,!0),t},e.exports=a.default},323:function(e,a,t){var r=t(87462),s=t(63366),n=t(60654),l=t.n(n),i=t(72791),o=t(84934),d=t(10162),c=["bsPrefix","className","children","controlId","as"],u=i.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,u=e.children,m=e.controlId,f=e.as,v=void 0===f?"div":f,h=(0,s.Z)(e,c);t=(0,d.vE)(t,"form-group");var p=(0,i.useMemo)((function(){return{controlId:m}}),[m]);return i.createElement(o.Z.Provider,{value:p},i.createElement(v,(0,r.Z)({},h,{ref:a,className:l()(n,t)}),u))}));u.displayName="FormGroup",a.Z=u},89743:function(e,a,t){var r=t(87462),s=t(63366),n=t(60654),l=t.n(n),i=t(72791),o=t(10162),d=["bsPrefix","className","noGutters","as"],c=["xl","lg","md","sm","xs"],u=i.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,u=e.noGutters,m=e.as,f=void 0===m?"div":m,v=(0,s.Z)(e,d),h=(0,o.vE)(t,"row"),p=h+"-cols",b=[];return c.forEach((function(e){var a,t=v[e];delete v[e];var r="xs"!==e?"-"+e:"";null!=(a=null!=t&&"object"===typeof t?t.cols:t)&&b.push(""+p+r+"-"+a)})),i.createElement(f,(0,r.Z)({ref:a},v,{className:l().apply(void 0,[n,h,u&&"no-gutters"].concat(b))}))}));u.displayName="Row",u.defaultProps={noGutters:!1},a.Z=u}}]);
//# sourceMappingURL=143.52bad028.chunk.js.map