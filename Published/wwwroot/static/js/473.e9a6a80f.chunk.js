(self.webpackChunktest=self.webpackChunktest||[]).push([[473],{6713:function(e,t,n){"use strict";var r=n(74165),a=n(15861),o=n(6924),i=n(81420),s=(0,o.Ue)({baseURL:i.Z.apiUrl});s.addAsyncRequestTransform(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.headers.Authorization="bearer ".concat(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.Z=s},97076:function(e,t,n){"use strict";var r=n(6713),a="/tenants";t.Z={add:function(e){return r.Z.post(a,e)},update:function(e,t){return r.Z.put(a+"/"+e,t)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},5504:function(e,t,n){"use strict";var r=n(1251),a=n(80184);t.Z=function(e){var t=e.children,n=e.isLoading;return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(r.JL,{color:"primary",size:"lg"})}):t})}},59352:function(e,t){"use strict";t.Z={lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D"}},51336:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(1413),a=n(74165),o=n(42982),i=n(15861),s=n(70885),c=n(72791),l=n(64074),d=n(43360),u=n(67352),f=n(39918),m=n(79745),h=n.n(m),p=n(77942),x=n(30456),g=n(5504),v=n(3044),b=n(92506),j=n(97425),Z=n(89743),w=n(2677),y=n(61229),k=n(80184),S=function(e){var t=e.show,n=e.setShow,r=e.tenant,a=e.schema,o=e.handleSubmit;return(0,k.jsx)(b.J9,{initialValues:r,onSubmit:o,validationSchema:a,enableReinitialize:!0,children:function(e){var a=e.setFieldValue,o=e.values;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(j.Z,{show:t,size:"xl",children:[(0,k.jsxs)(j.Z.Header,{children:[(0,k.jsx)(j.Z.Title,{children:0===r.id?"New Tenant":"Update Tenant"}),(0,k.jsx)(d.Z,{size:"sm",variant:"light",className:"float-right",onClick:function(){return n(!1)},children:(0,k.jsx)(h(),{style:{fontSize:15},name:"fas fa-close"})})]}),(0,k.jsx)(j.Z.Body,{children:(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(w.Z,{children:[(0,k.jsx)(y.k4,{type:"file",value:o.photo,file:"photo",label:"Tenant Photo",name:"photo",setFile:function(e){return a("photo",e)}}),(0,k.jsx)(y.k4,{type:"file",required:!0,value:o.identityDocument,file:"identityDocument",label:"Identity Document",name:"identityDocument",setFile:function(e){return a("identityDocument",e)}})]}),(0,k.jsxs)(w.Z,{children:[(0,k.jsx)(y.nv,{name:"name",label:"Name",required:!0}),(0,k.jsx)(y.nv,{name:"telephone",label:"Telephone",required:!0}),(0,k.jsx)(y.N7,{name:"address",label:"Address"})]})]})}),(0,k.jsxs)(j.Z.Footer,{children:[(0,k.jsx)(d.Z,{onClick:function(){return n(!1)},className:"btn-secondary",children:"Close"}),(0,k.jsx)(y.c1,{title:0===r.id?"Create":"Update"})]})]})})}})},N=n(97076),C=p.Ry({id:p.Rx(),name:p.Z_().min(5).max(50).required().label("Name"),photo:p.Z_().label("Photo"),telephone:p.Z_().required().label("Telephone"),identityDocument:p.Z_().required().label("Identity document"),messageChannel:p.Z_().label("Message channel"),address:p.Z_().label("Address")}),T=function(){var e=(0,c.useState)([{label:"Name",field:"name"},{label:"Telephone",field:"telephone"},{label:"Address",field:"address"},{label:"",field:"edit"}]),t=(0,s.Z)(e,1)[0],n=(0,c.useState)(!1),m=(0,s.Z)(n,2),p=m[0],b=m[1],j=(0,c.useState)([]),Z=(0,s.Z)(j,2),w=Z[0],y=Z[1],T=(0,c.useState)({id:0,name:"",photo:"",telephone:"",identityDocument:"",messageChannel:"SMS",address:""}),A=(0,s.Z)(T,2),R=A[0],L=A[1],E=(0,c.useState)(!1),U=(0,s.Z)(E,2),D=U[0],z=U[1],F=(0,c.useState)(!0),B=(0,s.Z)(F,2),P=B[0],O=B[1],M=(0,x.Z)(localStorage.token),G=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,N.Z.getAll();case 3:if(t=e.sent,n=t.status,r=t.data,O(!1),200===n){e.next=9;break}return e.abrupt("return",u.Am.error("Network Error"));case 9:y((0,o.Z)(r));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n){var i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,n.resetForm)(),b(!1),O(!0),0!==t.id){e.next=18;break}return e.next=7,N.Z.add((0,r.Z)({},t));case 7:if(i=e.sent,O(!1),!i.ok){e.next=13;break}return u.Am.info("Successful Registered."),b(!1),e.abrupt("return",y([i.data].concat((0,o.Z)(w))));case 13:if(400!==i.status){e.next=15;break}return e.abrupt("return",u.Am.error("This tenant is already exist!"));case 15:u.Am.error("Something went wrong"),e.next=27;break;case 18:return e.next=20,N.Z.update(t.id,t);case 20:if(s=e.sent,O(!1),!s.ok){e.next=26;break}return u.Am.info("Successful Updates."),b(!1),e.abrupt("return",y([s.data].concat((0,o.Z)(w.filter((function(e){return e.id!==t.id}))))));case 26:u.Am.error("Something went wrong");case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){G()}),[R]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.Z,{tenant:R,show:D,setShow:z,handleCloseTenant:function(){z(!1)}}),(0,k.jsx)(S,{show:p,setShow:b,tenant:R,schema:C,handleSubmit:H}),(0,k.jsxs)(l.Z,{children:[(0,k.jsxs)(l.Z.Header,{children:["admin"===M.role?(0,k.jsxs)(d.Z,{className:"float-right",onClick:function(){b(!0),L({id:0,name:"",photo:"",telephone:"",identityDocument:"",messageChannel:"SMS",address:""})},disabled:P,children:[(0,k.jsx)(h(),{name:"fas fa-plus-circle"})," ",P?"Creating Tenant":"New Tenant"]}):null,(0,k.jsx)(l.Z.Title,{children:"Tenants"})]}),(0,k.jsx)(l.Z.Body,{children:(0,k.jsx)(g.Z,{isLoading:P,children:(0,k.jsx)(f.Vm4,{data:{columns:t,rows:w.map((function(e){return e.edit=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{onClick:function(){return function(e){L((0,r.Z)({},e)),z(!0)}(e)},className:"btn-light btn-sm",children:(0,k.jsx)(h(),{className:"fas fa-eye text-secondary",style:{fontSize:17},name:"eye"})}),"admin"===M.role?(0,k.jsx)(d.Z,{onClick:function(){return function(e){var t=(0,r.Z)({},e);delete t.edit,L(t),b(!0)}(e)},className:"btn-light btn-sm ml-4",children:(0,k.jsx)(h(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})}):null]}),e}))},hover:!0,pagingTop:!0,searchTop:!0,entries:10,fullPagination:!0,pagesAmount:10,searchBottom:!1,entriesOptions:[10,25,50,100,250,500,1e3]})})})]})]})}},3044:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(97425),a=n(53717),o=n(96521),i=n(74960),s=n(18357),c=n(71971),l=n(8118),d=n(79745),u=n.n(d),f=n(64802),m=n.p+"static/media/user.a6143582309785dca610.png",h=n(80184),p=(0,a.Z)({container:{width:"100%",height:125,backgroundColor:"#f3f4f6",borderRadius:10,marginTop:25,display:"flex",alignItems:"center",paddingLeft:17},profileHover:{zIndex:1},image:{width:"100%",height:"100%",borderRadius:50},imageContainer:{width:100,height:100,borderRadius:50},textContainer:{marginLeft:20},name:{color:"black",fontSize:17,marginTop:30,fontFamily:"Poppins"},text:{fontSize:15,fontWeight:"400",color:"rgb(99, 115, 129)",position:"relative",bottom:12,fontFamily:"Poppins"}});function x(e){var t=e.name,n=e.icon,r=e.onClick,a=e.subText,o=e.photo,i=e.hover,s=void 0!==i&&i,c=p();return(0,h.jsxs)("div",{className:"".concat(c.container," ")+" ".concat(s&&c.profileHover),onClick:r,children:[(0,h.jsx)("div",{className:c.imageContainer,children:(0,h.jsx)("img",{src:o||m,className:c.image,alt:"Phot"})}),(0,h.jsxs)("div",{className:c.textContainer,children:[(0,h.jsxs)("p",{className:c.name,children:[" ",t]}),(0,h.jsxs)("p",{className:c.text,children:[n&&n," ",a]})]})]})}var g=n(59352),v=(0,a.Z)({profileIcon:{marginRight:5,color:g.Z.dark,transition:"color .15s","&:hover":{color:g.Z.main}},actionsContainer:{width:"100%",height:"100%"},formGroup:{marginBottom:25},profileContainer:{marginBottom:25},balanceContainer:{width:"100%",height:"50%",boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)",borderRadius:10},price:{fontSize:21,fontWeight:"500",position:"relative",top:15},currency:{fontSize:16,fontWeight:"400",color:"rgb(99, 115, 129)",textAlign:"center"},icon:{fontSize:17},image:{width:"100%",height:500,borderRadius:5}});function b(e){var t=e.show,n=e.tenant,a=e.onEdit,d=e.handleCloseTenant,m=v(),p=function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=[],n=0;n<e.length;n++)t[n]=e[n];return new Uint8Array(t)},g=URL.createObjectURL(new Blob([p(n.identityDocument)],{type:"image/png"})),b=URL.createObjectURL(new Blob([p(n.photo)],{type:"image/png"})),j=function(e){(0,f.saveAs)(e,"".concat(n.name,".png"))};return(0,h.jsxs)(r.Z,{show:t,centered:!0,size:"xl",children:[(0,h.jsxs)(r.Z.Header,{children:[(0,h.jsx)(r.Z.Title,{children:"Tenant information"}),(0,h.jsx)(o.Z,{className:"float-right",onClick:d,style:{fontSize:22,color:"black"},children:(0,h.jsx)(u(),{className:"fas fa-close",name:"close"})})]}),(0,h.jsx)(r.Z.Body,{children:(0,h.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,h.jsxs)(i.ZP,{item:!0,xl:6,lg:6,sm:6,xs:12,children:[(0,h.jsx)("div",{className:m.formGroup,children:(0,h.jsx)(x,{photo:b,name:null===n||void 0===n?void 0:n.name,subText:null===n||void 0===n?void 0:n.telephone,icon:(0,h.jsx)("a",{href:"tel:".concat(n.telephone),children:(0,h.jsx)("i",{className:"fas fa-phone-alt "+m.profileIcon})}),onClick:a,hover:!0})}),(0,h.jsxs)(s.Z,{className:m.formGroup,children:[(0,h.jsx)(c.Z,{children:"Address"}),(0,h.jsx)(l.Z,{value:n.address,disabled:!0})]}),(0,h.jsx)("div",{className:m.formGroup,children:(0,h.jsx)(o.Z,{fullWidth:!0,color:"success",variant:"contained",onClick:function(){return j(b)},children:"Download Tenant Photo"})}),(0,h.jsx)("div",{className:m.formGroup,children:(0,h.jsx)(o.Z,{fullWidth:!0,color:"primary",variant:"contained",onClick:function(){return j(g)},children:"Download Tenant Identity"})})]}),(0,h.jsx)(i.ZP,{item:!0,xl:6,lg:6,sm:6,xs:12,children:(0,h.jsx)(i.ZP,{container:!0,flexDirection:"column",className:m.actionsContainer,justifyContent:"center",children:(0,h.jsx)("div",{className:m.formGroup,children:(0,h.jsx)("img",{src:g,className:m.image,alt:"identity"})})})})]})})]})}},64802:function(e,t,n){var r,a,o;a=[],void 0===(o="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){c(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=i.URL||i.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?o(c):a(c.href)?r(e,t,n):o(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(a(e))r(e,n,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&c||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},d.readAsDataURL(e)}else{var u=i.URL||i.webkitURL,f=u.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c})?r.apply(t,a):r)||(e.exports=o)},89743:function(e,t,n){"use strict";var r=n(87462),a=n(63366),o=n(60654),i=n.n(o),s=n(72791),c=n(10162),l=["bsPrefix","className","noGutters","as"],d=["xl","lg","md","sm","xs"],u=s.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,u=e.noGutters,f=e.as,m=void 0===f?"div":f,h=(0,a.Z)(e,l),p=(0,c.vE)(n,"row"),x=p+"-cols",g=[];return d.forEach((function(e){var t,n=h[e];delete h[e];var r="xs"!==e?"-"+e:"";null!=(t=null!=n&&"object"===typeof n?n.cols:n)&&g.push(""+x+r+"-"+t)})),s.createElement(m,(0,r.Z)({ref:t},h,{className:i().apply(void 0,[o,p,u&&"no-gutters"].concat(g))}))}));u.displayName="Row",u.defaultProps={noGutters:!1},t.Z=u}}]);
//# sourceMappingURL=473.e9a6a80f.chunk.js.map