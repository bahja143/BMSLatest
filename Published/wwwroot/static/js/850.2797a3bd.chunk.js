"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[850],{6713:function(e,n,t){var r=t(74165),a=t(15861),i=t(6924),s=t(81420),l=(0,i.Ue)({baseURL:s.Z.apiUrl});l.addAsyncRequestTransform(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.headers.Authorization="bearer ".concat(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.Z=l},42915:function(e,n,t){var r=t(6713),a="/bills";n.Z={getAll:function(){return r.Z.get(a+"/allBills")},getOverDueBills:function(){return r.Z.get(a)}}},46827:function(e,n,t){var r=t(6713),a="/receipts";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},97076:function(e,n,t){var r=t(6713),a="/tenants";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},55206:function(e,n,t){var r=t(72791),a=t(61146),i=t(91523),s=t(97425),l=t(73849),c=t(80184);n.Z=function(e){var n,t,d,o,u,m,h,x,p,v,f=e.show,j=e.setShow,b=e.receipt,Z=(0,r.useRef)(null),N=(0,a.useReactToPrint)({content:function(){return Z.current}}),g=function(e){var n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),t=n.split(".");return t.length>1&&(n=t[0]),n};return(0,c.jsx)(s.Z,{show:f,size:"xl",children:(0,c.jsxs)("div",{className:"container",id:"printTable",children:[(0,c.jsx)("div",{ref:Z,children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsxs)("div",{className:"row invoice-contact",children:[(0,c.jsx)("div",{className:"col-9",children:(0,c.jsx)("div",{className:"invoice-box row",children:(0,c.jsx)("div",{className:"col-sm-12",children:(0,c.jsx)("table",{className:"table table-responsive invoice-table table-borderless p-l-20",children:(0,c.jsxs)("tbody",{children:[(0,c.jsx)("tr",{children:(0,c.jsx)("td",{children:(0,c.jsx)("h4",{style:{fontWeight:"bold"},children:"SHABELLE BANK BUILDING"})})}),(0,c.jsx)("tr",{children:(0,c.jsx)("td",{children:"Ethopia - Jijiga, Dudahide, Qabelle 06, Zone 01 Main Road"})}),(0,c.jsx)("tr",{children:(0,c.jsx)("td",{children:(0,c.jsx)("a",{className:"text-secondary",href:"mailto:shabellerealestate@gmail.com",target:"_top",children:"shabellerealestate@gmail.com"})})}),(0,c.jsx)("tr",{children:(0,c.jsx)("td",{children:"+251929256446"})}),(0,c.jsx)("tr",{children:(0,c.jsx)("td",{children:"+251915059099"})})]})})})})}),(0,c.jsx)("div",{className:"col-3",children:(0,c.jsx)(i.rU,{to:"#",className:"b-brand",children:(0,c.jsx)("img",{src:l,width:275,height:275,className:"img-fluid",alt:"Gradient Able Logo"})})})]}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"row invoive-info",children:[(0,c.jsxs)("div",{className:"col-4 invoice-client-info",children:[(0,c.jsx)("h6",{children:"Tenant Information :"}),(0,c.jsx)("h6",{className:"m-0",children:null===b||void 0===b||null===(n=b.tenant)||void 0===n?void 0:n.name}),(0,c.jsx)("p",{className:"m-2 m-t-10",children:null===b||void 0===b||null===(t=b.tenant)||void 0===t?void 0:t.address}),(0,c.jsx)("p",{className:"mb-3",children:null===b||void 0===b||null===(d=b.tenant)||void 0===d?void 0:d.telephone})]}),(0,c.jsxs)("div",{className:"col-4",children:[" ",(0,c.jsx)("h6",{children:"Receipt Information :"}),(0,c.jsx)("table",{style:{marginTop:-5},className:"table table-responsive invoice-table invoice-order table-borderless",children:(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date :"}),(0,c.jsx)("td",{children:null===b||void 0===b||null===(o=b.receipt)||void 0===o?void 0:o.date})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Paid by :"}),(0,c.jsx)("td",{children:null===b||void 0===b||null===(u=b.receipt)||void 0===u?void 0:u.payerName})]})]})})]}),(0,c.jsxs)("div",{className:"col-4",children:[(0,c.jsxs)("h6",{className:"m-b-20",children:["Receipt Number ",(0,c.jsxs)("span",{children:["#12",null===b||void 0===b||null===(m=b.tenant)||void 0===m?void 0:m.id]})]}),(0,c.jsxs)("h6",{className:"text-uppercase text-primary",children:["Total Due :"," ",(0,c.jsxs)("span",{children:[g(null===b||void 0===b||null===(h=b.bills)||void 0===h?void 0:h.map((function(e){return e.amount})).reduce((function(e,n){return e+n}))),".00 Birr"]})]})]})]}),(0,c.jsx)("div",{className:"row",children:(0,c.jsxs)("div",{className:"col-sm-12",children:[(0,c.jsx)("h5",{style:{position:"relative",top:-7.5},children:"Paid Bills"}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table invoice-detail-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"thead-default",children:[(0,c.jsx)("th",{className:"text-center",children:"Description"}),(0,c.jsx)("th",{className:"text-center",children:"Due Date"}),(0,c.jsx)("th",{className:"text-center",children:"Due Amount"}),(0,c.jsx)("th",{className:"text-center",children:"Paid Amount"}),(0,c.jsx)("th",{className:"text-center",children:"Remaining Balance"})]})}),(0,c.jsx)("tbody",{children:null===b||void 0===b||null===(x=b.bills)||void 0===x?void 0:x.map((function(e){return(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:"text-center",children:[(0,c.jsx)("h6",{children:e.room}),(0,c.jsx)("p",{className:"m-0",children:e.description})]}),(0,c.jsx)("td",{className:"text-center",children:new Date(e.dueDate).toLocaleDateString()}),(0,c.jsxs)("td",{className:"text-center",children:[g(e.amount),".00 BIRR"]}),(0,c.jsxs)("td",{className:"text-center",children:[" ",g(e.paidAmount),".00 BIRR"]}),(0,c.jsxs)("td",{className:"text-center",children:[" ",g(e.amount-e.paidAmount),".00 BIRR"]})]},e.id)}))})]})})]})}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-sm-12",children:(0,c.jsx)("table",{className:"table table-responsive invoice-table invoice-total",children:(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{className:"text-info",children:[(0,c.jsxs)("td",{children:[(0,c.jsx)("hr",{}),(0,c.jsx)("h5",{className:"text-primary m-r-10",children:"Total Paid :"})]}),(0,c.jsxs)("td",{children:[(0,c.jsx)("hr",{}),(0,c.jsxs)("h5",{className:"text-primary",children:[g(null===b||void 0===b||null===(p=b.bills)||void 0===p?void 0:p.map((function(e){return e.paidAmount})).reduce((function(e,n){return e+n}))),".00 Birr"]})]})]}),(0,c.jsxs)("tr",{className:"text-info",children:[(0,c.jsxs)("td",{children:[(0,c.jsx)("hr",{}),(0,c.jsx)("h5",{className:"text-primary m-r-10",children:"Remaining Balance :"})]}),(0,c.jsxs)("td",{children:[(0,c.jsx)("hr",{}),(0,c.jsxs)("h5",{className:"text-primary",children:[g(null===b||void 0===b||null===(v=b.bills)||void 0===v?void 0:v.map((function(e){return e.amount-e.paidAmount})).reduce((function(e,n){return e+n}))),".00 Birr"]})]})]})]})})})})]})]})}),(0,c.jsx)("div",{className:"row text-center btn-page",children:(0,c.jsxs)("div",{className:"col-sm-12 invoice-btn-group text-center",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-primary btn-print-invoice m-b-10",onClick:N,children:"Print"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary btn-print-invoice m-b-10",onClick:function(){return j(!1)},children:"Close"})]})})]})})}},8850:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(1413),a=t(74165),i=t(42982),s=t(15861),l=t(70885),c=t(72791),d=t(64074),o=t(89743),u=t(2677),m=t(62591),h=t(43360),x=t(92506),p=t(67352),v=t(79745),f=t.n(v),j=t(65666),b=t(77942),Z=t(61229),N=t(55206),g=t(97076),y=t(46827),w=t(42915),D=t(80184),A=b.Ry({id:b.Rx(),methodOfPayment:b.Z_().required().label("Method of payment"),details:b.IX().min(1,"You must select at least 1 Bill").label("Bills"),payerName:b.Z_().required().label("Payer name"),description:b.Z_().label("Description")});function S(e){var n=(0,c.useState)({id:0,details:[],tenantId:"",payerName:"",description:"",methodOfPayment:""}),t=(0,l.Z)(n,2),v=t[0],b=t[1],S=(0,c.useState)(!0),B=(0,l.Z)(S,2),I=B[0],k=B[1],R=(0,c.useState)([]),P=(0,l.Z)(R,2),C=P[0],z=P[1],L=(0,c.useState)([]),T=(0,l.Z)(L,2),E=T[0],O=T[1],U=(0,c.useState)([{label:"Bank Account",value:"Bank Account"},{label:"Hello Cash",value:"Hello Cash"},{label:"Cash",value:"Cash"}]),q=(0,l.Z)(U,1)[0],F=(0,c.useState)(!1),H=(0,l.Z)(F,2),M=H[0],_=H[1],G=(0,c.useState)({}),J=(0,l.Z)(G,2),W=J[0],$=J[1],K=(0,c.useState)({}),Q=(0,l.Z)(K,2),V=Q[0],X=Q[1],Y=(0,c.useState)(!1),ee=(0,l.Z)(Y,2),ne=ee[0],te=ee[1],re=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,g.Z.getAll();case 3:return n=e.sent,t=n.data,e.next=7,w.Z.getAll();case 7:r=e.sent,s=r.data,k(!1),z((0,i.Z)(t)),O((function(e){return[].concat((0,i.Z)(s),(0,i.Z)(e))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t,s){var l,c,d,o,u,m;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=s.resetForm,c=(0,i.Z)(t.details.map((function(e){return e.value}))),d=E.filter((function(e){return e.tenantId===t.tenantId})).map((function(e){return{tenantId:e.tenantId,billId:e.id}})),c.every((function(e){return d.map((function(e){return e.billId})).includes(e)}))||0!==t.id){n.next=8;break}return p.Am.error("Something went wrong"),b({id:0,details:[],tenantId:"",payerName:"",description:"",methodOfPayment:""}),n.abrupt("return",l());case 8:if(delete(o=(0,r.Z)({},t)).tenantId,o.details=o.details.map((function(e){return{id:0,receiptId:0,billId:e.value,amount:e.paidAmount}})),k(!0),0!==o.id){n.next=27;break}return n.next=15,y.Z.add((0,r.Z)({},o));case 15:if(u=n.sent,k(!1),!u.ok){n.next=24;break}return p.Am.info("Success"),$({receipt:(0,r.Z)((0,r.Z)({},t),{},{date:(new Date).toDateString()}),tenant:C.find((function(e){return e.id===t.tenantId})),bills:E.filter((function(e){return E.filter((function(e){return c.includes(e.id)})).map((function(e){return e.id})).includes(e.id)})).map((function(e){var n;return e.paidAmount=null===(n=t.details)||void 0===n?void 0:n.find((function(n){return n.value===e.id})).paidAmount,e}))}),l(),_(!0),b({id:0,details:[],tenantId:"",payerName:"",description:"",methodOfPayment:""}),n.abrupt("return",O((0,i.Z)(u.data.value)));case 24:p.Am.error("Something went wrong"),n.next=34;break;case 27:return n.next=29,y.Z.update(o.id,o);case 29:if(m=n.sent,k(!1),!m.ok){n.next=33;break}return n.abrupt("return",e.history.goBack());case 33:p.Am.error("Something went wrong");case 34:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),ie=function(e){var n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),t=n.split(".");return t.length>1&&(n=t[0]),n},se=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,s,l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.match.params.id)){n.next=10;break}return k(!0),n.next=5,y.Z.getById(t);case 5:s=n.sent,l=s.data,k(!1),O((function(e){return[].concat((0,i.Z)(l.bills),(0,i.Z)(e))})),b((0,r.Z)((0,r.Z)({},l),{},{methodOfPayment:l.paymentMethod,details:l.bills.map((function(e){return{label:(0,D.jsxs)("span",{children:[ie(e.amount)," Birr : ",e.room," :",new Date(e.dueDate)>new Date?(0,D.jsx)("span",{className:"badge badge-success ml-2",children:new Date(e.dueDate).toDateString()}):(0,D.jsx)("span",{className:"badge badge-danger ml-2",children:new Date(e.dueDate).toDateString()})]}),value:e.id,paidAmount:e.paidAmount}}))}));case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),le=function(e){return e.map((function(e){return{label:(0,D.jsxs)("span",{children:[ie(e.amount)," Birr : ",e.room," :",new Date(e.dueDate)>new Date?(0,D.jsx)("span",{className:"badge badge-success ml-2",children:new Date(e.dueDate).toDateString()}):(0,D.jsx)("span",{className:"badge badge-danger ml-2",children:new Date(e.dueDate).toDateString()})]}),value:e.id,amount:0}}))};return(0,c.useEffect)((function(){re(),se()}),[]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(N.Z,{show:M,setShow:_,receipt:W}),(0,D.jsxs)(d.Z,{children:[(0,D.jsx)(d.Z.Header,{children:(0,D.jsx)(d.Z.Title,{children:0===v.id?"Bill Receipt":"Update Receipt"})}),(0,D.jsx)(x.J9,{enableReinitialize:!0,initialValues:v,validationSchema:A,onSubmit:ae,children:function(e){var n,t,a,s=e.values;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(d.Z.Body,{children:[(0,D.jsxs)(o.Z,{children:[(0,D.jsx)(u.Z,{children:(0,D.jsx)(Z.mg,{isLoading:I,options:C.map((function(e){return{label:"".concat(e.name," (").concat(e.telephone,")"),value:e.id}})),name:"tenantId",label:"Tenant",isDisabled:0!==v.id,required:!0})}),(0,D.jsx)(u.Z,{children:(0,D.jsx)(Z.mg,{options:q,name:"methodOfPayment",label:"Payment Method",required:!0})})]}),(0,D.jsx)(o.Z,{children:(0,D.jsx)(u.Z,{children:(0,D.jsxs)(m.Z,{className:"mt-4 mb-4",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:"Bill"}),(0,D.jsx)("th",{children:"Amount"}),(0,D.jsx)("th",{children:"Due date"}),(0,D.jsx)("th",{})]})}),(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"col-4",children:(0,D.jsx)(j.ZP,{isLoading:I,options:le((a=s.tenantId,E.filter((function(e){return e.tenantId===a}))).filter((function(e){return!s.details.map((function(e){return e.value})).includes(e.id)}))),value:V,onChange:function(e){return X(e)}})}),(0,D.jsx)("td",{className:"col-4",children:(0,D.jsx)("input",{className:"form-control ".concat(ne?"is-invalid":""),placeholder:"0.000",name:"amount",value:V.paidAmount,type:"number",onChange:function(e){return n=e.target.value,void X((function(e){return(0,r.Z)((0,r.Z)({},e),{},{paidAmount:parseInt(n)})}));var n}})}),(0,D.jsx)("td",{className:"col-4",children:(0,D.jsx)("input",{name:"duedate",className:"form-control",value:V.value?new Date(null===(n=E.find((function(e){return e.id===V.value})))||void 0===n?void 0:n.dueDate).toDateString():"",disabled:!0})}),(0,D.jsx)("td",{children:(0,D.jsxs)(h.Z,{size:"sm",variant:"primary",disabled:!V.value,onClick:function(){return function(e){var n=E.find((function(e){return e.id===V.value}));if(te(!1),V.paidAmount>n.amount||0===V.paidAmount)return te(!0);X({paidAmount:0}),b((function(n){return(0,r.Z)((0,r.Z)({},e),{},{details:[V].concat((0,i.Z)(n.details))})}))}(s)},children:[" ",(0,D.jsx)(f(),{name:"fas fa-plus-circle text-white"})]})})]}),null===(t=v.details)||void 0===t?void 0:t.map((function(e){var n;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:(0,D.jsx)(j.ZP,{isDisabled:!0,value:e,options:e})}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{className:"form-control",name:"amount",value:"".concat(ie(e.paidAmount)," Birr"),disabled:!0})}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{className:"form-control",value:new Date(null===(n=E.find((function(n){return n.id===e.value})))||void 0===n?void 0:n.dueDate).toDateString(),disabled:!0})}),(0,D.jsxs)("td",{children:[(0,D.jsxs)(h.Z,{size:"sm",variant:"primary",onClick:function(){return n=e,X((0,r.Z)({},n)),void b((function(e){return(0,r.Z)((0,r.Z)({},e),{},{details:e.details.filter((function(e){return e.value!==n.value}))})}));var n},children:[" ",(0,D.jsx)(f(),{className:"fas fa-edit text-white",name:"edit"})]}),(0,D.jsxs)(h.Z,{size:"sm",variant:"danger",onClick:function(){return n=e.value,void b((function(e){return(0,r.Z)((0,r.Z)({},e),{},{details:e.details.filter((function(e){return e.value!==n}))})}));var n},children:[" ",(0,D.jsx)(f(),{className:"fas fa-trash text-white",name:"trash-can"})]})]})]},e.value)}))]})]})})}),(0,D.jsx)(o.Z,{children:(0,D.jsx)(u.Z,{children:(0,D.jsx)(Z.nv,{name:"payerName",label:"Who's paying",required:!0})})}),(0,D.jsx)(o.Z,{children:(0,D.jsx)(u.Z,{children:(0,D.jsx)(Z.N7,{rows:"5",placeholder:"Extra information",name:"description",label:"Description"})})})]}),(0,D.jsx)(d.Z.Footer,{className:"text-center",children:(0,D.jsx)(Z.c1,{size:"lg",title:I?"...Loading":0===v.id?"Submit":"Update",disabled:I})})]})}})]})]})}},62591:function(e,n,t){var r=t(87462),a=t(63366),i=t(60654),s=t.n(i),l=t(72791),c=t(10162),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],o=l.forwardRef((function(e,n){var t=e.bsPrefix,i=e.className,o=e.striped,u=e.bordered,m=e.borderless,h=e.hover,x=e.size,p=e.variant,v=e.responsive,f=(0,a.Z)(e,d),j=(0,c.vE)(t,"table"),b=s()(i,j,p&&j+"-"+p,x&&j+"-"+x,o&&j+"-striped",u&&j+"-bordered",m&&j+"-borderless",h&&j+"-hover"),Z=l.createElement("table",(0,r.Z)({},f,{className:b,ref:n}));if(v){var N=j+"-responsive";return"string"===typeof v&&(N=N+"-"+v),l.createElement("div",{className:N},Z)}return Z}));n.Z=o},73849:function(e,n,t){e.exports=t.p+"static/media/Shebelle.f71562d6af0072864cc4.jpg"}}]);
//# sourceMappingURL=850.2797a3bd.chunk.js.map