"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[729],{6713:function(e,t,n){var r=n(74165),a=n(15861),s=n(6924),i=n(81420),c=(0,s.Ue)({baseURL:i.Z.apiUrl});c.addAsyncRequestTransform(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.headers.Authorization="bearer ".concat(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.Z=c},75047:function(e,t,n){var r=n(6713),a="/expensecategories";t.Z={add:function(e){return r.Z.post(a,e)},update:function(e,t){return r.Z.put(a+"/"+e,t)},getAll:function(){return r.Z.get(a)}}},5504:function(e,t,n){var r=n(1251),a=n(80184);t.Z=function(e){var t=e.children,n=e.isLoading;return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(r.JL,{color:"primary",size:"lg"})}):t})}},42729:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(1413),a=n(74165),s=n(42982),i=n(15861),c=n(70885),o=n(72791),u=n(64074),l=n(43360),d=n(67352),f=n(39918),h=n(79745),m=n.n(h),x=n(77942),Z=n(30456),p=n(5504),g=n(92506),b=n(97425),j=n(61229),k=n(80184),v=function(e){var t=e.show,n=e.setShow,r=e.category,a=e.schema,s=e.handleSubmit;return(0,k.jsx)(g.J9,{enableReinitialize:!0,initialValues:r,validationSchema:a,onSubmit:s,children:function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(b.Z,{show:t,children:[(0,k.jsxs)(b.Z.Header,{children:[(0,k.jsx)(b.Z.Title,{children:0===r.id?"New Category":"Update Category"}),(0,k.jsx)(l.Z,{size:"sm",variant:"light",className:"float-right",onClick:function(){return n(!1)},children:(0,k.jsx)(m(),{style:{fontSize:15},name:"fas fa-close"})})]}),(0,k.jsx)(b.Z.Body,{children:(0,k.jsx)(j.nv,{name:"name",label:"Name",required:!0})}),(0,k.jsxs)(b.Z.Footer,{children:[(0,k.jsx)(l.Z,{onClick:function(){return n(!1)},className:"btn-secondary",children:"Close"}),(0,k.jsx)(j.c1,{title:0===r.id?"Create":"Update"})]})]})})}})},w=n(75047),y=x.Ry({id:x.Rx(),name:x.Z_().required().label("Category Name")}),S=function(){var e=(0,o.useState)(!1),t=(0,c.Z)(e,2),n=t[0],h=t[1],x=(0,o.useState)([]),g=(0,c.Z)(x,2),b=g[0],j=g[1],S=(0,o.useState)({id:0,name:""}),C=(0,c.Z)(S,2),N=C[0],A=C[1],z=(0,o.useState)([{label:"Name",field:"name"},{label:"",field:"edit"}]),F=(0,c.Z)(z,1)[0],R=(0,o.useState)(!0),T=(0,c.Z)(R,2),U=T[0],L=T[1],q=(0,Z.Z)(localStorage.token),B=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,w.Z.getAll();case 3:if(t=e.sent,n=t.status,r=t.data,L(!1),200===n){e.next=9;break}return e.abrupt("return",d.Am.error("Network Error"));case 9:j((0,s.Z)(r));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n){var i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,n.resetForm)(),h(!1),L(!0),0!==t.id){e.next=18;break}return e.next=7,w.Z.add((0,r.Z)({},t));case 7:if(i=e.sent,L(!1),!i.ok){e.next=13;break}return d.Am.info("Successful Registered."),h(!1),e.abrupt("return",j([i.data].concat((0,s.Z)(b))));case 13:if(400!==i.status){e.next=15;break}return e.abrupt("return",d.Am.error("This category is already exist!"));case 15:d.Am.error("Something went wrong"),e.next=27;break;case 18:return e.next=20,w.Z.update(t.id,t);case 20:if(c=e.sent,L(!1),!c.ok){e.next=26;break}return d.Am.info("Successful Updates."),h(!1),e.abrupt("return",j([c.data].concat((0,s.Z)(b.filter((function(e){return e.id!==t.id}))))));case 26:d.Am.error("Something went wrong");case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){B()}),[N]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v,{show:n,setShow:h,category:N,schema:y,handleSubmit:E}),(0,k.jsxs)(u.Z,{children:[(0,k.jsxs)(u.Z.Header,{children:["admin"===q.role?(0,k.jsxs)(l.Z,{className:"float-right",onClick:function(){h(!0),A({id:0,name:""})},disabled:U,children:[(0,k.jsx)(m(),{name:"fas fa-plus-circle"})," New Category"]}):null,(0,k.jsx)(u.Z.Title,{children:"Expense Categories"})]}),(0,k.jsx)(u.Z.Body,{children:(0,k.jsx)(p.Z,{isLoading:U,children:(0,k.jsx)(f.Vm4,{hover:!0,entriesOptions:[10,25,50,100,250,500,1e3],entries:10,pagesAmount:10,data:{columns:F,rows:b.map((function(e){return e.edit=(0,k.jsx)(k.Fragment,{children:"admin"===q.role?(0,k.jsx)(l.Z,{onClick:function(){return function(e){var t=(0,r.Z)({},e);delete t.edit,A(t),h(!0)}(e)},className:"btn-light btn-sm",children:(0,k.jsx)(m(),{className:"fas fa-edit text-primary",style:{fontSize:17},name:"edit"})}):null}),e}))},pagingTop:!0,searchTop:!0,searchBottom:!1,fullPagination:!0})})})]})]})}}}]);
//# sourceMappingURL=729.7afec227.chunk.js.map