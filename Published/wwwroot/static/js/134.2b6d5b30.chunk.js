"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[134],{15284:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(37762),a=t(15671),o=t(43144),l=t(60136),s=t(27277),u=t(72791),i=t(64074),d=t(62591),c=t(73849),m=t(80184),f=function(e){(0,l.Z)(t,e);var n=(0,s.Z)(t);function t(){var e;(0,a.Z)(this,t);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(e=n.call.apply(n,[this].concat(l))).state={count:1},e.handleTableBody=function(n){var t,a=1,o=(0,r.Z)(n);try{for(o.s();!(t=o.n()).done;){t.value.id=a,a++}}catch(l){o.e(l)}finally{o.f()}return null===n||void 0===n?void 0:n.map((function(n){return(0,m.jsx)("tr",{children:e.handleRowData(n).map((function(e){return(0,m.jsx)("td",{style:{height:"12",padding:"6 24",border:"1px solid #eaeaea"},children:e},e)}))},n.id)}))},e.handleRowData=function(e){var n=[];for(var t in e)n.push(e[t]);return n},e}return(0,o.Z)(t,[{key:"render",value:function(){var e=new Date,n=this.props,t=n.title,r=n.data,a=n.theaders;return(0,m.jsxs)(i.Z,{children:[(0,m.jsx)(i.Z.Header,{children:(0,m.jsx)(i.Z.Title,{children:(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("div",{className:"col-12",children:[(0,m.jsx)("img",{src:c,height:"120",alt:"Logo"}),(0,m.jsx)("h3",{className:"mt-2",children:(0,m.jsx)("p",{className:"float-right",children:e.toDateString()})}),(0,m.jsx)("h5",{children:(0,m.jsx)("h3",{children:t})})]})})})}),(0,m.jsx)(i.Z.Body,{children:(0,m.jsxs)(d.Z,{striped:!0,hover:!0,ref:"tbl",className:"table table-condensed",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"#"}),null===a||void 0===a?void 0:a.map((function(e){return(0,m.jsx)("th",{children:e},e)}))]})}),(0,m.jsx)("tbody",{children:this.handleTableBody(r)})]})})]})}}]),t}(u.Component),h=f},63364:function(e,n,t){var r=t(6713),a="/rooms";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},97076:function(e,n,t){var r=t(6713),a="/tenants";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},65134:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(74165),a=t(1413),o=t(42982),l=t(15861),s=t(70885),u=t(72791),i=t(64074),d=t(89743),c=t(2677),m=t(53392),f=t(43360),h=t(39918),b=t(67352),p=t(79745),Z=t.n(p),v=t(61146),x=t.n(v),g=t(65666),j=t(5504),N=t(91594),w=t(15284),D=t(3044),S=t(17693),y=t(28843),A=t(97076),T=t(63364);var C=function(e,n){if(""===n.date&&""===n.status){var t="All"===n.name?e:e.filter((function(e){return e.name===n.name}));return"All"===n.roomNumber?t:t.filter((function(e){return e.roomNumber===n.roomNumber}))}if(""!==n.date&&""!==n.status){var r="All"===n.name?e:e.filter((function(e){return e.name===n.name}));return("All"===n.roomNumber?r:r.filter((function(e){return e.roomNumber===n.roomNumber}))).filter((function(e){var t=new Date(e.date),r=e.isCurrent?new Date(e.endDate)>new Date?"Current":"Expired":"Throwed Out";return t>=n.date&&r===e.status}))}if(""!==n.date){var a="All"===n.name?e:e.filter((function(e){return e.name===n.name}));return("All"===n.roomNumber?a:a.filter((function(e){return e.roomNumber===n.roomNumber}))).filter((function(e){return new Date(e.date)>=n.date}))}if(""!==n.status){var o="All"===n.name?e:e.filter((function(e){return e.name===n.name}));return("All"===n.roomNumber?o:o.filter((function(e){return e.roomNumber===n.roomNumber}))).filter((function(e){return(e.isCurrent?new Date(e.endDate)>new Date?"Current":"Expired":"Throwed Out")===n.status}))}return[]},E=t(80184),k=function(){var e,n=(0,u.useState)([{label:"Tenant",field:"name"},{label:"Telephone",field:"tellphone"},{label:"Room",field:"roomNo"},{label:"Amount(Monthly)",field:"amount"},{label:"Date",field:"date"},{label:"",field:"actions"},{label:"",field:"status"}]),t=(0,s.Z)(n,1)[0],p=(0,u.useState)([{label:"Tenant",field:"name"},{label:"Telephone",field:"tellphone"},{label:"Room",field:"roomNo"},{label:"Amount(Monthly)",field:"amount"},{label:"Start Date",field:"startDate"},{label:"End Date",field:"endDate"},{label:"Status",field:"status"}]),v=(0,s.Z)(p,1)[0],k=(0,u.useState)([]),B=(0,s.Z)(k,2),P=B[0],R=B[1],L=(0,u.useState)([]),O=(0,s.Z)(L,2),z=O[0],q=O[1],I=(0,u.useState)({tenant:{}}),F=(0,s.Z)(I,2),H=F[0],M=F[1],V=(0,u.useState)(!1),$=(0,s.Z)(V,2),G=$[0],J=$[1],K=(0,u.useState)(!1),Q=(0,s.Z)(K,2),U=Q[0],W=Q[1],X=(0,u.useState)({}),Y=(0,s.Z)(X,2),_=Y[0],ee=Y[1],ne=(0,u.useState)([]),te=(0,s.Z)(ne,2),re=te[0],ae=te[1],oe=(0,u.useState)([]),le=(0,s.Z)(oe,2),se=le[0],ue=le[1],ie=(0,u.useState)(!1),de=(0,s.Z)(ie,2),ce=de[0],me=de[1],fe=(0,u.useState)(""),he=(0,s.Z)(fe,2),be=he[0],pe=he[1],Ze=(0,u.useState)(!1),ve=(0,s.Z)(Ze,2),xe=ve[0],ge=ve[1],je=(0,u.useState)({date:"",name:"All",status:"",roomNumber:"All"}),Ne=(0,s.Z)(je,2),we=Ne[0],De=Ne[1],Se=(0,u.useState)([{value:"Current",label:(0,E.jsx)("span",{className:"badge badge-success",children:"Current"})},{value:"Expired",label:(0,E.jsx)("span",{className:"badge badge-danger",children:"Expired"})},{value:"Throwed Out",label:(0,E.jsx)("span",{className:"badge badge-secondary",children:"Throwed Out"})}]),ye=(0,s.Z)(Se,1)[0],Ae=(0,u.useRef)(),Te=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n,t,l,s,u,i,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.next=3,y.Z.getAll();case 3:return n=e.sent,t=n.status,l=n.data,e.next=8,A.Z.getAll();case 8:return s=e.sent,u=s.data,e.next=12,T.Z.getAll();case 12:if(i=e.sent,d=i.data,ge(!1),200===t){e.next=17;break}return e.abrupt("return",b.Am.error("Network Error"));case 17:R((0,o.Z)(null===l||void 0===l?void 0:l.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{roomNumber:e.room.roomNumber,name:e.tenant.name})})))),q((0,o.Z)(null===l||void 0===l?void 0:l.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{roomNumber:e.room.roomNumber})})))),ae([{id:"All",name:"All"}].concat((0,o.Z)(u))),ue([{id:"All",roomNumber:"All"}].concat((0,o.Z)(d)));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(e){var n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),t=n.split(".");return t.length>1&&(n=t[0]),n},Ee=function(e){var n=e.currentTarget;we[n.name]=n.value,De((0,a.Z)({},we)),ke(we)},ke=function(e){q((0,o.Z)(C((0,o.Z)(P),e)))};return(0,u.useEffect)((function(){Te()}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(S.Z,{show:ce,document:be,handleCloseDocument:function(){me(!1),J(!0)}}),(0,E.jsx)(D.Z,{tenant:_,show:U,setShow:W,handleCloseTenant:function(){W(!1),J(!0)}}),(0,E.jsx)(N.Z,{show:G,contract:H,setShow:J,handleShowTenant:function(e){ee(e),J(!1),W(!0)},handleShowDocument:function(e){pe(e),J(!1),me(!0)}}),(0,E.jsxs)(i.Z,{children:[(0,E.jsxs)(i.Z.Header,{children:[(0,E.jsx)(i.Z.Title,{children:(0,E.jsxs)(d.Z,{children:[(0,E.jsx)(c.Z,{children:"All Contracts "}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(x(),{trigger:function(){return(0,E.jsx)("button",{type:"button",className:"btn d-print-none float-right",children:(0,E.jsx)(Z(),{className:"fas fa-print",name:"print",style:{fontSize:25}})})},content:function(){return Ae}}),(0,E.jsx)("div",{className:"d-none",children:(0,E.jsx)(w.Z,{data:(e=z,0===e.length?[]:e.map((function(e){var n;return{id:e.id,name:e.tenant.name,telephone:e.tenant.telephone,roomNumber:"".concat(e.room.roomNumber,"-").concat(e.room.floorNo),amount:"".concat(Ce((null===(n=e.room)||void 0===n?void 0:n.roomSizeInSq)*e.amountPerSq)," Birr"),startDate:new Date(e.startDate).toLocaleDateString(),endDate:new Date(e.endDate).toLocaleDateString(),status:e.isCurrent?new Date(e.endDate)>new Date?(0,E.jsx)("span",{className:"badge badge-success",children:"Current"}):(0,E.jsx)("span",{className:"badge badge-danger",children:"Expired"}):(0,E.jsx)("span",{className:"badge badge-secondary",children:"Throwed Out"})}}))),theaders:v.filter((function(e){return""!==e.label})).map((function(e){return e.label})),title:"Contracts Report",ref:function(e){return Ae=e}})})]})]})}),(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(m.Z,{children:"Tenants"}),(0,E.jsx)(g.ZP,{value:re.filter((function(e){return e.name===we.name})).map((function(e){return{label:e.name,value:e.id}})),onChange:function(e){return Ee({currentTarget:{name:"name",value:e.label}})},options:re.map((function(e){return{label:e.name,value:e.id}})),isLoading:xe})]}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(m.Z,{children:"Rooms"}),(0,E.jsx)(g.ZP,{value:se.filter((function(e){return e.roomNumber===we.roomNumber})).map((function(e){return{label:e.roomNumber,value:e.id}})),onChange:function(e){return Ee({currentTarget:{name:"roomNumber",value:e.label}})},options:se.map((function(e){return{label:e.roomNumber,value:e.id}})),isLoading:xe})]}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(m.Z,{children:"Status"}),(0,E.jsx)(g.ZP,{value:ye.filter((function(e){return e.value===we.status})),onChange:function(e){return Ee({currentTarget:{name:"status",value:e.value}})},options:ye,isLoading:xe})]})]})]}),(0,E.jsx)(i.Z.Body,{children:(0,E.jsx)(j.Z,{isLoading:xe,children:(0,E.jsx)(h.Vm4,{entries:10,pagesAmount:10,data:{columns:t,rows:(0,o.Z)(z.map((function(e){var n,t,r,a;return e.status=e.isCurrent?new Date(e.endDate)>new Date?(0,E.jsx)("span",{className:"badge badge-success",children:"Current"}):(0,E.jsx)("span",{className:"badge badge-danger",children:"Expired"}):(0,E.jsx)("span",{className:"badge badge-secondary",children:"Throwed Out"}),e.actions=(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(f.Z,{className:"btn-light btn-sm mr-4",onClick:function(){return function(e){J(!0),M(e)}(e)},children:(0,E.jsx)(Z(),{name:"eye",style:{fontSize:17},className:"fas fa-eye text-secondary "})})}),e.name=null===(n=e.tenant)||void 0===n?void 0:n.name,e.tellphone=null===(t=e.tenant)||void 0===t?void 0:t.telephone,e.roomNo="".concat(null===(r=e.room)||void 0===r?void 0:r.roomNumber," (").concat(e.room.floorNo,")"),e.amount="".concat(Ce((null===(a=e.room)||void 0===a?void 0:a.roomSizeInSq)*e.amountPerSq)," Birr"),e.date=new Date(e.date).toDateString(),e})))},pagingTop:!0,searchTop:!0,fullPagination:!0,searchBottom:!1,entriesOptions:[10,25,50,100,250,500,1e3]})})})]})]})}},62591:function(e,n,t){var r=t(87462),a=t(63366),o=t(60654),l=t.n(o),s=t(72791),u=t(10162),i=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],d=s.forwardRef((function(e,n){var t=e.bsPrefix,o=e.className,d=e.striped,c=e.bordered,m=e.borderless,f=e.hover,h=e.size,b=e.variant,p=e.responsive,Z=(0,a.Z)(e,i),v=(0,u.vE)(t,"table"),x=l()(o,v,b&&v+"-"+b,h&&v+"-"+h,d&&v+"-striped",c&&v+"-bordered",m&&v+"-borderless",f&&v+"-hover"),g=s.createElement("table",(0,r.Z)({},Z,{className:x,ref:n}));if(p){var j=v+"-responsive";return"string"===typeof p&&(j=j+"-"+p),s.createElement("div",{className:j},g)}return g}));n.Z=d}}]);
//# sourceMappingURL=134.2b6d5b30.chunk.js.map