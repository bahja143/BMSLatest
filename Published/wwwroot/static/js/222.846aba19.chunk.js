"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[222],{6713:function(e,n,t){var r=t(74165),a=t(15861),i=t(6924),s=t(81420),u=(0,i.Ue)({baseURL:s.Z.apiUrl});u.addAsyncRequestTransform(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.token;case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.headers.Authorization="bearer ".concat(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.Z=u},28843:function(e,n,t){var r=t(6713),a="/contracts";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a+"/all")},getOut:function(e){return r.Z.get(a+"/out/"+e)},getCurrent:function(){return r.Z.get(a)}}},63364:function(e,n,t){var r=t(6713),a="/rooms";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},97076:function(e,n,t){var r=t(6713),a="/tenants";n.Z={add:function(e){return r.Z.post(a,e)},update:function(e,n){return r.Z.put(a+"/"+e,n)},getAll:function(){return r.Z.get(a)},getById:function(e){return r.Z.get(a+"/"+e)}}},9222:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(1413),a=t(74165),i=t(42982),s=t(15861),u=t(70885),o=t(72791),l=t(64074),c=t(89743),d=t(2677),Z=t(53392),f=t(92506),m=t(77942),x=t(67352),h=t(61229),p=t(97076),b=t(63364),v=t(28843),j=t(80184),g=m.Ry({id:m.Rx(),tNo:m.Z_().required().label("T Number"),roomId:m.Z_().required().label("Room"),license:m.Z_().required().label("License"),endDate:m.hT().when("startDate",(function(e,n){return e&&n.min(e)})).label("End Date"),tenantId:m.Z_().required().label("Tenant"),startDate:m.hT().required().label("Start Date"),amountPerSq:m.Rx().min(100).max(1e3).required().label("Amount Per Karre"),witness1:m.Z_().required().label("Witness 1"),witness2:m.Z_().required().label("Witness 2"),witness3:m.Z_()});function w(e){var n=(0,o.useState)({id:0,tNo:"",roomId:"",license:"",endDate:"",tenantId:"",startDate:"",amountPerSq:"",witness1:"",witness2:"",witness3:""}),t=(0,u.Z)(n,2),m=t[0],w=t[1],q=(0,o.useState)([]),S=(0,u.Z)(q,2),k=S[0],y=S[1],N=(0,o.useState)([]),A=(0,u.Z)(N,2),D=A[0],I=A[1],P=(0,o.useState)(!1),R=(0,u.Z)(P,2),T=R[0],F=R[1],_=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,p.Z.getAll();case 3:return n=e.sent,t=n.data,e.next=7,b.Z.getAll();case 7:r=e.sent,s=r.data,F(!1),y((0,i.Z)(t)),I((0,i.Z)(s));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t,i){var s,u,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=i.resetForm,F(!0),0!==t.id){n.next=15;break}return n.next=5,v.Z.add((0,r.Z)({},t));case 5:if(u=n.sent,F(!1),!u.ok){n.next=10;break}return x.Am.info("Success"),n.abrupt("return",s());case 10:if(400!==u.status){n.next=12;break}return n.abrupt("return",x.Am.error("This room is already rented!"));case 12:x.Am.error("Something went wrong"),n.next=22;break;case 15:return n.next=17,v.Z.update(t.id,t);case 17:if(o=n.sent,F(!1),!o.ok){n.next=21;break}return n.abrupt("return",e.history.goBack());case 21:x.Am.error("Something went wrong");case 22:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),L=function(e){var n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),t=n.split(".");return t.length>1&&(n=t[0]),n};return(0,o.useEffect)((function(){_(),function(){var n,t;if(null!==e&&void 0!==e&&null!==(n=e.history)&&void 0!==n&&null!==(t=n.location)&&void 0!==t&&t.state){var a,i,s=(null===e||void 0===e||null===(a=e.history)||void 0===a||null===(i=a.location)||void 0===i?void 0:i.state).data;delete s.room,delete s.tenant,w((0,r.Z)({},s))}}()}),[]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(l.Z.Header,{children:(0,j.jsx)(l.Z.Title,{children:0===m.id?"New Contract":"Update Contract"})}),(0,j.jsx)(f.J9,{initialValues:m,enableReinitialize:!0,validationSchema:g,onSubmit:E,children:function(e){var n,t=e.setFieldValue,r=e.values;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(l.Z.Body,{children:[(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.mg,{name:"tenantId",options:k.map((function(e){return{label:e.name,value:e.id}})),label:"Tenant",isLoading:T,required:!0})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.mg,{name:"roomId",options:D.map((function(e){return{label:"".concat(e.roomNumber,"-").concat(e.floorNo," (").concat(e.roomSizeInSq,"Karre)"),value:e.id}})),label:"Room",isLoading:T,required:!0})})]}),(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(d.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.nv,{name:"amountPerSq",label:"Amount Per Karre",type:"number",required:!0})})})}),(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(Z.Z,{children:"Total Rent Per Month"}),(0,j.jsx)("input",{className:"form-control",disabled:!0,value:"".concat(""!=r.amountPerSq&&""!=r.roomId?L(r.amountPerSq*(null===(n=D.find((function(e){return e.id===r.roomId})))||void 0===n?void 0:n.roomSizeInSq)):0," Birr")})]})]}),(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.Nn,{name:"startDate",label:"Start Date",required:!0})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.Nn,{name:"endDate",label:"End Date",required:!0})})]}),(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.nv,{name:"tNo",label:"T No",required:!0})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.k4,{required:!0,type:"file",file:"license",name:"license",label:"License Document",value:r.license,setFile:function(e){return t("license",e)}})})]}),(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.nv,{name:"witness1",label:"Witness 1",required:!0})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.nv,{name:"witness2",label:"Witness 2",required:!0})})]}),(0,j.jsx)(c.Z,{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(h.nv,{name:"witness3",label:"Witness 3"})})})]}),(0,j.jsx)(l.Z.Footer,{className:"text-center",children:(0,j.jsx)(h.c1,{size:"lg",title:T?"...Loading":0===m.id?"Submit":"Update",disabled:T})})]})}})]})})}},89743:function(e,n,t){var r=t(87462),a=t(63366),i=t(60654),s=t.n(i),u=t(72791),o=t(10162),l=["bsPrefix","className","noGutters","as"],c=["xl","lg","md","sm","xs"],d=u.forwardRef((function(e,n){var t=e.bsPrefix,i=e.className,d=e.noGutters,Z=e.as,f=void 0===Z?"div":Z,m=(0,a.Z)(e,l),x=(0,o.vE)(t,"row"),h=x+"-cols",p=[];return c.forEach((function(e){var n,t=m[e];delete m[e];var r="xs"!==e?"-"+e:"";null!=(n=null!=t&&"object"===typeof t?t.cols:t)&&p.push(""+h+r+"-"+n)})),u.createElement(f,(0,r.Z)({ref:n},m,{className:s().apply(void 0,[i,x,d&&"no-gutters"].concat(p))}))}));d.displayName="Row",d.defaultProps={noGutters:!1},n.Z=d}}]);
//# sourceMappingURL=222.846aba19.chunk.js.map