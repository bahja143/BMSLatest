"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[301],{81420:function(e,r){var a={dev:{apiUrl:"https://localhost:7146/api"},pro:{apiUrl:"http://".concat(window.location.host,"/api")}};r.Z=a.pro},11599:function(e,r,a){var t=a(74569),n=a.n(t),o=a(67352);n().interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log(e),o.Am.error("Unexpected error occur")),Promise.reject(e)}));var s={post:n().post,put:n().put,get:n().get};r.Z=s},85301:function(e,r,a){a.r(r);var t=a(37762),n=a(1413),o=a(4942),s=a(15671),l=a(43144),i=a(60136),c=a(27277),d=a(72791),u=a(11599),m=a(30456),h=a(64074),f=a(52343),v=a.n(f),p=a(67352),b=a(81420),g=a(80184),Z=function(e){(0,i.Z)(a,e);var r=(0,c.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];return(e=r.call.apply(r,[this].concat(i))).state={user:{id:0,name:"",username:"",role:"",password:""},errors:{}},e.schema={id:v().number().allow(0),name:v().string().min(3).required().label("Name"),username:v().string().required().label("Username"),role:v().string().required().label("Role"),password:v().string().required().label("Password"),status:v().any(),notar:v().any(),notary:v().any(),notarId:v().any()},e.validateProperty=function(r){var a=(0,o.Z)({},r.name,r.value),t=(0,o.Z)({},r.name,e.schema[r.name]),n=v().validate(a,t).error;return n?n.details[0].message:null},e.validate=function(){var r=(0,n.Z)({},e.state.user),a={},o=v().validate(r,e.schema,{abortEarly:!1}).error;if(!o)return null;var s,l=(0,t.Z)(o.details);try{for(l.s();!(s=l.n()).done;){var i=s.value;a[i.path[0]]=i.message}}catch(c){l.e(c)}finally{l.f()}return a},e.handleSubmit=function(r){r.preventDefault();var a=(0,n.Z)({},e.state.user),t=e.validate();e.setState({errors:t||{}});var o={Authorization:"bearer ".concat(localStorage.token)};t||(e.setState({loading:!0}),u.Z.put(b.Z.apiUrl+"/users/"+a.id,a,{headers:o}).then((function(){u.Z.post(b.Z.apiUrl+"/token",a).then((function(e){var r=e.data;localStorage.setItem("token",r.token),window.location="/"})).catch((function(r){if(400===r.response.status&&r.response.data){var a=(0,n.Z)({},e.state.errors);a.username=r.response.data,e.setState({errors:a,loading:!1})}}))})).catch((function(){p.Am.error("Something went wrong.")})))},e.handleChange=function(r){var a=r.currentTarget,t=(0,n.Z)({},e.state.user);t[a.name]=a.value;var o=(0,n.Z)({},e.state.errors),s=e.validateProperty(a);s?o[a.name]=s:delete o[a.name],e.setState({user:t,errors:o})},e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.state,r=e.user,a=e.errors;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(h.Z,{children:[(0,g.jsx)(h.Z.Header,{children:(0,g.jsx)(h.Z.Title,{children:"Your Profile"})}),(0,g.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,g.jsxs)(h.Z.Body,{children:[(0,g.jsx)("div",{className:"row form-group",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsxs)("label",{htmlFor:"name",children:["Name ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)("input",{onChange:this.handleChange,value:r.name,id:"name",name:"name",type:"text",className:"form-control"}),a.name&&(0,g.jsx)("div",{className:"text-danger",children:a.name})]})}),(0,g.jsxs)("div",{className:"row form-group",children:[(0,g.jsxs)("div",{className:"col-6",children:[(0,g.jsx)("label",{htmlFor:"username",children:"Username"}),(0,g.jsx)("input",{id:"username",name:"username",value:r.username,disabled:!0,type:"text",className:"form-control"})]}),(0,g.jsxs)("div",{className:"col-6",children:[(0,g.jsx)("label",{htmlFor:"role",children:"Role"}),(0,g.jsx)("input",{id:"role",name:"role",value:r.role,disabled:!0,type:"text",className:"form-control"})]})]})]}),(0,g.jsx)(h.Z.Footer,{children:(0,g.jsx)("div",{className:"text-center",children:(0,g.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:this.validate(),children:"Save changes"})})})]})]})})}},{key:"componentDidMount",value:function(){var e=this,r=localStorage.getItem("token"),a=(0,m.Z)(r);this.setState({loading:!0});var t={Authorization:"bearer ".concat(localStorage.token)};u.Z.get(b.Z.apiUrl+"/users/"+a.id,{headers:t}).then((function(r){var a=r.data;e.setState({user:a,loading:!1})})).catch((function(e){console.log(e),p.Am.error("Something went wrong")}))}}]),a}(d.Component);r.default=Z},64074:function(e,r,a){a.d(r,{Z:function(){return P}});var t=a(87462),n=a(63366),o=a(60654),s=a.n(o),l=a(72791),i=a(10162),c=a(66543),d=a(27472),u=l.createContext(null);u.displayName="CardContext";var m=u,h=["bsPrefix","className","variant","as"],f=l.forwardRef((function(e,r){var a=e.bsPrefix,o=e.className,c=e.variant,d=e.as,u=void 0===d?"img":d,m=(0,n.Z)(e,h),f=(0,i.vE)(a,"card-img");return l.createElement(u,(0,t.Z)({ref:r,className:s()(c?f+"-"+c:f,o)},m))}));f.displayName="CardImg",f.defaultProps={variant:null};var v=f,p=["bsPrefix","className","bg","text","border","body","children","as"],b=(0,d.Z)("h5"),g=(0,d.Z)("h6"),Z=(0,c.Z)("card-body"),x=(0,c.Z)("card-title",{Component:b}),y=(0,c.Z)("card-subtitle",{Component:g}),j=(0,c.Z)("card-link",{Component:"a"}),w=(0,c.Z)("card-text",{Component:"p"}),N=(0,c.Z)("card-header"),S=(0,c.Z)("card-footer"),C=(0,c.Z)("card-img-overlay"),k=l.forwardRef((function(e,r){var a=e.bsPrefix,o=e.className,c=e.bg,d=e.text,u=e.border,h=e.body,f=e.children,v=e.as,b=void 0===v?"div":v,g=(0,n.Z)(e,p),x=(0,i.vE)(a,"card"),y=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return l.createElement(m.Provider,{value:y},l.createElement(b,(0,t.Z)({ref:r},g,{className:s()(o,x,c&&"bg-"+c,d&&"text-"+d,u&&"border-"+u)}),h?l.createElement(Z,null,f):f))}));k.displayName="Card",k.defaultProps={body:!1},k.Img=v,k.Title=x,k.Subtitle=y,k.Body=Z,k.Link=j,k.Text=w,k.Header=N,k.Footer=S,k.ImgOverlay=C;var P=k},37762:function(e,r,a){a.d(r,{Z:function(){return n}});var t=a(40181);function n(e,r){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=(0,t.Z)(e))||r&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){i=!0,s=e},f:function(){try{l||null==a.return||a.return()}finally{if(i)throw s}}}}}}]);
//# sourceMappingURL=301.04fbf3e3.chunk.js.map